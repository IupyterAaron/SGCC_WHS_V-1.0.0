use [WHS_SGCC v1.0];

CREATE TABLE kINDS(
    KINDID int IDENTITY(2020001,1) NOT NULL ,
    KINDNAME VARCHAR(20) not null ,
    PRIMARY KEY CLUSTERED (KINDID)
);

insert into kINDS (KINDNAME) values ('金具类');
insert into kINDS (KINDNAME) values ('杆塔类');
insert into kINDS (KINDNAME) values ('导线类');
insert into kINDS (KINDNAME) values ('附加件');
insert into kINDS (KINDNAME) values ('紧固件');
insert into kINDS (KINDNAME) values ('设备类');

CREATE TABLE DBO.MTA(
    MTAID INT IDENTITY (2021001,1) NOT NULL ,       /*材料编号*/
    MTANAME VARCHAR(20) NOT NULL ,                  /*材料名称*/
    KINDID INT FOREIGN KEY REFERENCES DBO.kINDS(KINDID),
    MTAMODEL VARCHAR(20) ,                          /*型号*/
    MTAINVE NUMERIC(18,2) NOT NULL ,
    MTAUNIT VARCHAR(20) NULL,
    PRIMARY KEY (MTAID),
);

insert into MTA (MTANAME, KINDID, MTAMODEL, MTAINVE, MTAUNIT)
values ('U型螺丝',2020004,'80mm',200,'个');

CREATE TABLE DBO.PROJECT(
    PROJECTID INT IDENTITY(2022001,1),
    PROJECTNAME VARCHAR(500) NOT NULL ,
    PRIMARY KEY (PROJECTID)
);

insert into DBO.PROJECT(PROJECTNAME)
values ('城网改造项目');

create TABLE DBO.OUT(
    OUTID INT IDENTITY(2023001,1) NOT NULL ,
    PROJECTID INT NULL ,
    OUTDATE DATE NOT NULL ,
    STARTER VARCHAR(20),
    PICKER VARCHAR(20),
    OUTPRICE VARCHAR(5000),
    PRIMARY KEY (OUTID),
    FOREIGN KEY (PROJECTID) REFERENCES [WHS_SGCC v1.0].DBO.PROJECT(PROJECTID)
)

insert into dbo.OUT (projectid, outdate, starter, picker, outprice)
values (2022001,'2020-06-08','小张', '小李','fjkla;sdfhsdfsjdfhklashflashfklasjdfhkladsjfhla');

CREATE TABLE DBO.OUTLIST (
    OUTLISTID INT IDENTITY(2024001,1) NOT NULL ,
    OUTID INT ,
    MTAID INT,
    OUTNUM NUMERIC(18,2) NOT NULL ,
    UNIT VARCHAR(20),
    PRIMARY KEY (OUTLISTID),
    FOREIGN KEY (OUTID) REFERENCES [WHS_SGCC v1.0].DBO.OUT(OUTID),
    FOREIGN KEY (MTAID) REFERENCES [WHS_SGCC v1.0].DBO.MTA(MTAID)
);

CREATE TABLE USERS(
    USERID INT NOT NULL PRIMARY KEY ,
    USERPASS VARCHAR(20) NOT NULL ,
    USERNAME VARCHAR(20)
);

INSERT INTO [WHS_SGCC v1.0].DBO.USERS(USERID, USERPASS, USERNAME) values
    (20202215, '123456', '杨作超');

CREATE TABLE IMPORTS(
    INSID INT IDENTITY (2025001,1) PRIMARY KEY NOT NULL ,
    PROJECTID INT REFERENCES [WHS_SGCC v1.0].DBO.PROJECT(PROJECTID),
    INSDATE DATE ,
    TOTALPRICE NUMERIC(18,2) NOT NULL ,     /*总价格*/
    BATCH INT NULL,                         /*领货批次*/
    RECEIVER VARCHAR(20)
);

CREATE TABLE IMPORTSLIST(
    INSLISTID INT IDENTITY (2026001,1) PRIMARY KEY NOT NULL ,
    INSID INT NOT NULL  REFERENCES [WHS_SGCC v1.0].DBO.IMPORTS(INSID),
    MTAID INT  NOT NULL REFERENCES [WHS_SGCC v1.0].DBO.MTA(MTAID),
    UNIT VARCHAR(20) NOT NULL ,
    NUM NUMERIC(18,2) NOT NULL ,
    PRICE NUMERIC(18,2)NOT NULL
);

SELECT * FROM [WHS_SGCC v1.0].DBO.USERS;
